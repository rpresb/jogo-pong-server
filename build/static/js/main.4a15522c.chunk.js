(this["webpackJsonpjogo-pong"]=this["webpackJsonpjogo-pong"]||[]).push([[0],{35:function(e,t,a){e.exports=a(93)},40:function(e,t,a){},41:function(e,t,a){},70:function(e,t){},93:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(32),c=a.n(r),i=(a(40),a(41),function(e){return o.a.createElement("div",{className:"list-group"},o.a.createElement("span",{className:"list-title"},"Jogadores"),Object.keys(e.players).map((function(t){return o.a.createElement("div",{key:t,className:"list-item"},e.players[t].name)})))}),l=a(11),s=function(e){var t=Object(n.useState)(""),a=Object(l.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){var e=document.getElementById("chat-content");e.scrollTop=e.scrollHeight}),[e.messages]),o.a.createElement("div",{className:"chat-container"},o.a.createElement("div",{id:"chat-content",className:"chat-content"},e.messages.join("\n\n")),o.a.createElement("div",{className:"chat-form"},o.a.createElement("input",{type:"text",value:r,onChange:function(e){return c(e.target.value)}}),o.a.createElement("button",{disabled:!r.trim(),className:r.trim()?"":"disabled",onClick:function(){e.sendMessage(r),c("")}},"Enviar")))},m=a(34),u=a(3),d=a(33),y=a.n(d)()("https://secret-taiga-81699.herokuapp.com",{autoConnect:!1}),p=o.a.createContext(),g=function(e,t){switch(t.type){case"CONNECTED":return Object(u.a)({},e,{isConnected:t.payload});case"PLAYER":return Object(u.a)({},e,{player:t.payload});case"PLAYERS":return Object(u.a)({},e,{players:t.payload});case"ROOM":return Object(u.a)({},e,{room:e.rooms[e.players[t.payload].room]});case"ROOMS":return Object(u.a)({},e,{rooms:t.payload});case"MATCH":return Object(u.a)({},e,{match:t.payload});case"ADD_MESSAGE":return Object(u.a)({},e,{messages:[].concat(Object(m.a)(e.messages),[t.payload])});default:return e}},E={isConnected:!1,player:{},room:{},rooms:{},players:{},messages:[],match:{}},h=function(e){var t=Object(n.useReducer)(g,E),a=Object(l.a)(t,2),r=a[0],c=a[1];return Object(n.useEffect)((function(){y.on("connect",(function(){c({type:"CONNECTED",payload:!0})})),y.on("disconnect",(function(){c({type:"CONNECTED",payload:!1})})),y.on("PlayersRefresh",(function(e){c({type:"PLAYERS",payload:e}),c({type:"PLAYER",payload:e[y.id]})})),y.on("ReceiveMessage",(function(e){c({type:"ADD_MESSAGE",payload:e})})),y.on("RoomsRefresh",(function(e){c({type:"ROOMS",payload:e}),c({type:"ROOM",payload:y.id})})),y.on("MatchRefresh",(function(e){c({type:"MATCH",payload:e})})),y.open()}),[]),o.a.createElement(p.Provider,{value:r},e.children)},f=function(e){y.emit("SendMessage",e)},v=function(){y.emit("CreateRoom")},b=function(){y.emit("LeaveRoom")},S=void 0,O=function(){var e=Object(n.useContext)(p),t=e.player,a=e.rooms,r=e.room;return o.a.createElement("div",{className:"list-group"},o.a.createElement("span",{className:"list-title"},"Salas",!t.room&&o.a.createElement("button",{onClick:v},"Criar Sala")),!t.room&&Object.keys(a).map((function(e){return o.a.createElement("div",{key:"room_".concat(e),className:"list-item"},a[e].name,o.a.createElement("button",{onClick:function(){return t=e,void y.emit("JoinRoom",t);var t},disabled:a[e].player1&&a[e].player2},"Entrar"))})),t.room&&r&&o.a.createElement("div",null,a[t.room]&&a[t.room].player1&&a[t.room].player2?o.a.createElement("button",null,"Iniciar Jogo"):o.a.createElement("div",{className:"list-item"},o.a.createElement("span",null,r.name),o.a.createElement("button",{onClick:b},"Sair"))))},w=a(4),C=a.n(w),j=function(){var e=Object(n.useContext)(p).match,t=e.gameConfig,a=e.ball,r=e.message,c=e.player1,i=e.player2;return Object(n.useEffect)((function(){y.emit("GameLoaded");var e=function(e){var t=e.key,a=e.type;switch(t){case"ArrowUp":case"ArrowDown":!function(e,t){S!==e&&(S=e,y.emit("SendKey",{type:e,key:t}))}(a,t),e.preventDefault()}};return document.addEventListener("keydown",e),document.addEventListener("keyup",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)}}),[]),o.a.createElement("div",{style:{position:"relative"}},o.a.createElement(C.a,{width:t.width.toString(),height:t.height.toString()},o.a.createElement(w.Rect,{x:"0",y:"0",width:t.width.toString(),height:t.height.toString(),style:{fill:"rgb(0, 0, 0)"}}),o.a.createElement(w.Line,{x1:(t.width/2).toString(),y1:"0",x2:(t.width/2).toString(),y2:t.height.toString(),strokeDasharray:"5,5",strokeWidth:"5",style:{stroke:"rgba(255, 255, 255, 0.5)"}}),o.a.createElement("text",{x:(t.width/2-20).toString(),y:"45",style:{direction:"rtl",fill:"rgba(255, 255, 255, 0.7)",fontSize:"50px"}},e.score1),o.a.createElement("text",{x:(t.width/2+20).toString(),y:"45",style:{fill:"rgba(255, 255, 255, 0.7)",fontSize:"50px"}},e.score2),a&&o.a.createElement(w.Circle,{cx:a.x.toString(),cy:a.y.toString(),r:a.width.toString(),style:{fill:"#fff"}}),c&&o.a.createElement(w.Rect,{x:c.x.toString(),y:c.y.toString(),width:c.width.toString(),height:c.height.toString(),style:{fill:"rgb(255, 255, 255)"}}),i&&o.a.createElement(w.Rect,{x:i.x.toString(),y:i.y.toString(),width:i.width.toString(),height:i.height.toString(),style:{fill:"rgb(255, 255, 255)"}})),r&&o.a.createElement("div",{className:"game-message"},o.a.createElement("h4",null,r),o.a.createElement("button",{onClick:b},"Voltar")))},k=function(){var e=Object(n.useContext)(p),t=e.isConnected,a=e.players,r=e.messages,c=e.match;return o.a.createElement(o.a.Fragment,null,!t&&o.a.createElement("div",null,"Desconectado, conectando..."),c.status&&o.a.createElement(j,null),!c.status&&o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{className:"list-container"},o.a.createElement(O,null),o.a.createElement(i,{players:a})),o.a.createElement(s,{sendMessage:f,messages:r})))};var x=function(){return o.a.createElement("div",{className:"main-container"},o.a.createElement(h,null,o.a.createElement(k,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.4a15522c.chunk.js.map